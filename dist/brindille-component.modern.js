export default class{constructor(t,e=null){this.$el=t,this.componentName="",this.refs={},this._componentInstances=[],this.root=this,this.parent=null,e&&this.init(e)}$one(t){return this.$el.querySelector(t)}$all(t){return[].slice.call(this.$el.querySelectorAll(t))}init(t=null){this.definitions=t instanceof Function?t:null==t?()=>null:e=>t[e],this.parse(),this.root===this&&this.onAppReady()}onAppReady(){this._componentInstances.forEach(t=>t.onAppReady())}dispose(){this.disposeChildren(),this.destroy()}disposeChildren(){this._componentInstances.forEach(t=>{t.dispose()}),this._componentInstances=[],this.refs={}}replaceContent(t){this.disposeChildren(),this.$el.innerHTML=t,this.parse()}destroy(){this.parent&&this.$el.parentNode&&this.$el.parentNode===this.parent.$el&&this.parent.$el.removeChild(this.$el),this.parent=null,this.$el=null}findInstance(t){const e=this._componentInstances.filter(e=>e.componentName===t);if(e&&e.length)return e[0];for(let e=0,n=this._componentInstances.length;e<n;e++){const n=this._componentInstances[e].findInstance(t);if(n)return n}return null}findAllInstances(t){let e=this._componentInstances.filter(e=>e.componentName===t);for(let n=0,s=this._componentInstances.length;n<s;n++)e=e.concat(this._componentInstances[n].findAllInstances(t));return e}parse(){!function t(e,n){let s;var o;e=null==(o=e)?[]:Array.isArray(o)?o:[o];for(let o=0,i=(e=[].slice.call(e)).length;o<i;o++)s=e[o],s&&s.hasAttribute&&s.hasAttribute("data-component")?n(s):s.childNodes&&s.childNodes.length&&t([].slice.call(s.childNodes),n)}(this.$el,t=>{const e=t&&t.getAttribute?t.getAttribute("data-component"):"";let n,s;1===t.nodeType&&e&&("FORM"===t.tagName&&console.warn("FORM tag does not support data-component. You should encapsulate the <form> with a <div> in component "+e),n=this.definitions(e),n?(t.removeAttribute("data-component"),s=new n(t),s.componentName=e,s.parent=this,s.root=this.root,s.init(this.definitions),this._componentInstances.push(s),t.getAttribute("data-ref")&&(this.refs[t.getAttribute("data-ref")]=s)):console.warn(`Can't find component '${e}'`))}),this.ready()}ready(){}get componentInstances(){return this._componentInstances}}
//# sourceMappingURL=brindille-component.modern.js.map
